<?php

declare(strict_types=1);

namespace WyriHaximus\Broadcast\Generated;

use Psr\Container\ContainerInterface;
use Psr\EventDispatcher\ListenerProviderInterface;

use function React\Async\async;
use function React\Async\await;

/**
 * This class is generated by wyrihaximus/broadcast and inspired by bmack/kart-composer-plugin
 */
abstract class AbstractListenerProvider implements ListenerProviderInterface
{
    /** @return iterable<(callable(object): mixed)> */
    final public function getListenersForEvent(object $event): iterable
    {
        // phpcs:disable
        yield from match ($event::class) {
            \WyriHaximus\Broadcast\Dummy\Event::class => [
                                                                            ([$this->container()->get(\WyriHaximus\Broadcast\Dummy\Listener::class), 'handle']),
                                                                            ([$this->container()->get(\WyriHaximus\Broadcast\Dummy\Listener::class), 'handleBoth']),
                                                        '\WyriHaximus\Broadcast\Dummy\Listener::handleBothStaticly'                    ,
                                    fn (\WyriHaximus\Broadcast\Dummy\Event $event) => await(async(fn (\WyriHaximus\Broadcast\Dummy\Event $event) =>                    $this->container()->get(\WyriHaximus\Broadcast\Dummy\AsyncListener::class)->handle
                    ($event))($event)),
                                    static fn (\WyriHaximus\Broadcast\Dummy\Event $event) => await(async(static fn (\WyriHaximus\Broadcast\Dummy\Event $event) =>                    \WyriHaximus\Broadcast\Dummy\AsyncListener::handleStatic                    ($event))($event)),
                            ],
            \stdClass::class => [
                                                                            ([$this->container()->get(\WyriHaximus\Broadcast\Dummy\Listener::class), 'handleBoth']),
                                                        '\WyriHaximus\Broadcast\Dummy\Listener::handleBothStaticly'                    ,
                            ],
            default => [],
        };
        // phpcs:enable
    }

    abstract protected function container(): ContainerInterface;
}
